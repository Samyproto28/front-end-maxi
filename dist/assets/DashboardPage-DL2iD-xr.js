import{c as v,a as e,o as c,b as d,d as k,w as i,n as h,r as H,e as C,t as u,_ as z,f as b,g as E,h as U,i as o,u as x,j as Z,k as _}from"./index-CBeB2GAs.js";import{_ as q,A as y,a as F}from"./api-DDywFk_F.js";import{_ as I,a as L}from"./AppCard-Cj7gG7Gi.js";import{u as O,A as G}from"./resultadoStore-BvQc6XBY.js";import{A as J}from"./AppAlert-nOKybVDX.js";import{u as K}from"./telegramaStore-CBxXN5Hf.js";function Q(r,t){return c(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function W(r,t){return c(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"})])}function X(r,t){return c(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const Y={class:"grid grid-cols-2 gap-4"},ee={class:"flex items-center justify-center"},ae={class:"flex flex-col justify-center"},te={class:"text-3xl font-bold text-gray-900"},re={class:"text-sm text-gray-600 mt-1"},se={key:0,class:"text-xs text-gray-500 mt-1"},w={__name:"StatsCard",props:{icon:{type:[Object,Function],required:!0},label:{type:String,required:!0},value:{type:[String,Number],required:!0},subvalue:{type:[String,Number],default:null},variant:{type:String,default:"primary",validator:r=>["primary","success","warning"].includes(r)}},setup(r){const t=r,f=d(()=>typeof t.value=="number"?t.value.toLocaleString():t.value),s=d(()=>{switch(t.variant){case"success":return"border-l-4 border-green-500";case"warning":return"border-l-4 border-yellow-500";case"primary":default:return"border-l-4 border-blue-500"}}),m=d(()=>{switch(t.variant){case"success":return"bg-green-100";case"warning":return"bg-yellow-100";case"primary":default:return"bg-blue-100"}}),g=d(()=>{switch(t.variant){case"success":return"text-green-600";case"warning":return"text-yellow-600";case"primary":default:return"text-blue-600"}});return(p,A)=>(c(),k(I,{class:h(["transition-transform duration-200 ease-in-out hover:scale-105 cursor-default",s.value])},{default:i(()=>[e("div",Y,[e("div",ee,[e("div",{class:h(["w-16 h-16 rounded-full flex items-center justify-center",m.value])},[(c(),k(H(r.icon),{class:h(["w-8 h-8",g.value])},null,8,["class"]))],2)]),e("div",ae,[e("div",te,u(f.value),1),e("div",re,u(r.label),1),r.subvalue?(c(),v("div",se,u(r.subvalue),1)):C("",!0)])])]),_:1},8,["class"]))}},oe={class:"min-h-screen flex flex-col"},ne={class:"flex-1"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ie={class:"mb-8"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ue={class:"mb-8"},de={class:"flex flex-wrap gap-4"},me={key:0,class:"mb-4"},ge={class:"font-medium"},ve={__name:"DashboardPage",setup(r){const t=Z(),f=O(),s=K(),m=b(!1),g=b(null),p=b(null),A=[{key:"mesa",label:"Mesa",sortable:!0},{key:"provincia",label:"Provincia",sortable:!0},{key:"cargo",label:"Cargo",sortable:!0},{key:"usuario",label:"Usuario",sortable:!0},{key:"hora",label:"Hora",sortable:!0}],T=d(()=>!s.telegramas||s.telegramas.length===0?0:new Set(s.telegramas.map(a=>a.mesa_id)).size),$=d(()=>s.telegramas?s.telegramas.length:0),V=d(()=>f.participacionPorcentaje||0),B=d(()=>!s.telegramas||s.telegramas.length===0?[]:[...s.telegramas].sort((n,a)=>new Date(a.created_at)-new Date(n.created_at)).slice(0,10)),S=async()=>{m.value=!0,g.value=null;try{await Promise.allSettled([s.fetchTelegramas?.(),f.fetchResultadoNacional()])}catch(n){console.error("Error fetching data:",n),g.value="Error al cargar los datos del dashboard"}finally{m.value=!1}},N=n=>{if(!n)return"-";try{return new Date(n).toLocaleString("es-AR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return n}},P=()=>{t.push("/cargar-telegrama")},j=()=>{t.push("/resultados/provincial")},D=()=>{alert("Funcionalidad de exportar reportes próximamente disponible")},M=()=>{R(),p.value=setInterval(()=>{S()},3e4)},R=()=>{p.value&&(clearInterval(p.value),p.value=null)};return E(()=>{S(),M()}),U(()=>{R()}),(n,a)=>(c(),v("div",oe,[o(q),e("main",ne,[e("div",le,[a[5]||(a[5]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Dashboard")],-1)),e("section",ie,[e("div",ce,[o(w,{icon:x(W),label:"Mesas Cargadas",value:T.value,variant:"primary"},null,8,["icon","value"]),o(w,{icon:x(X),label:"Telegramas Pendientes",value:$.value,variant:"warning"},null,8,["icon","value"]),o(w,{icon:x(Q),label:"Participación Nacional",value:V.value,subvalue:"%",variant:"success"},null,8,["icon","value"])])]),e("section",ue,[a[3]||(a[3]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Acciones Rápidas",-1)),e("div",de,[o(y,{variant:"primary",size:"lg",onClick:P},{default:i(()=>[...a[0]||(a[0]=[_(" Cargar Telegrama ",-1)])]),_:1}),o(y,{variant:"secondary",size:"lg",onClick:j},{default:i(()=>[...a[1]||(a[1]=[_(" Resultados Provincial ",-1)])]),_:1}),o(y,{variant:"secondary",size:"lg",onClick:D},{default:i(()=>[...a[2]||(a[2]=[_(" Exportar Reportes ",-1)])]),_:1})])]),e("section",null,[a[4]||(a[4]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Últimos Telegramas",-1)),m.value?(c(),v("div",me,[o(F)])):C("",!0),g.value?(c(),k(J,{key:1,type:"error",message:g.value,class:"mb-4"},null,8,["message"])):C("",!0),o(G,{columns:A,data:B.value,loading:m.value,"empty-message":"No hay telegramas cargados aún"},{"cell-mesa":i(({row:l})=>[e("span",ge,u(l.mesa?.numero||"-"),1)]),"cell-provincia":i(({row:l})=>[e("span",null,u(l.mesa?.provincia?.nombre||"-"),1)]),"cell-cargo":i(({row:l})=>[e("span",null,u(l.cargo?.nombre||"-"),1)]),"cell-usuario":i(({row:l})=>[e("span",null,u(l.usuario?.nombre||"-"),1)]),"cell-hora":i(({row:l})=>[e("span",null,u(N(l.created_at)),1)]),_:1},8,["data","loading"])])])]),o(L)]))}},ye=z(ve,[["__scopeId","data-v-ada3a753"]]);export{ye as default};
